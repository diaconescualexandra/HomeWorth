<div class="flex items-center justify-center mt-20 p-6 gap-4 pb-20" title="Container for property add">
    <div class="outline rounded-xl outline-gray-300 w-full max-w-2xl p-8 shadow-2xl shadow-blue-700/20">
        <div class="text-slate-700 font-semibold p-3 text-3xl mb-3">Add a property</div>

        <form [formGroup]="addPropertyForm" (ngSubmit)="addProperty()">

            <div class="flex flex-row ml-2 justify-center mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    [class.stroke-indigo-500]="selectedPropertyType === 1"
                    [class.stroke-slate-700]="selectedPropertyType !== 1"
                    class="size-15 outline outline-gray-300 rounded p-3 mr-3 mb-3 focus:outline-indigo-500 block w-sm"
                    (click)="selectPropertyType(1)">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21" />
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    [class.stroke-indigo-500]="selectedPropertyType === 2"
                    [class.stroke-slate-700]="selectedPropertyType !== 2"
                    class="size-15 outline outline-gray-300 rounded p-3 mr-3 mb-3 focus:outline-indigo-500 block w-sm"
                    (click)="selectPropertyType(2)">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205 3 1m1.5.5-1.5-.5M6.75 7.364V3h-3v18m3-13.636 10.5-3.819" />
                </svg>
            </div>

            <input
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('title')?.invalid && 
            (addPropertyForm.get('title')?.touched || addPropertyForm.get('title')?.dirty)}" placeholder="Title"
                formControlName="title" />

            <div *ngIf="isInvalid('title')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['title'].errors?.['required']">
                    Title is required.
                </ng-container>
            </div>

            <textarea
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('description')?.invalid && 
            (addPropertyForm.get('description')?.touched || addPropertyForm.get('description')?.dirty)}"
                placeholder="Description" formControlName="description" required></textarea>

            <div *ngIf="isInvalid('description')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['description'].errors?.['required']">
                    Description is required.
                </ng-container>
            </div>

            <select
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('city')?.invalid && 
            (addPropertyForm.get('city')?.touched || addPropertyForm.get('city')?.dirty)}" placeholder="City"
                formControlName="city" required>
                <option>Melbourne</option>
            </select>

            <div *ngIf="isInvalid('city')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['city'].errors?.['required']">
                    City is required.
                </ng-container>
            </div>

            <select
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('neighborhood')?.invalid && 
            (addPropertyForm.get('neighborhood')?.touched || addPropertyForm.get('neighborhood')?.dirty)}"
                placeholder="Neighborhood" formControlName="neighborhood" required>
                <option [value]="null" disabled>Select neighborhood</option>
                <option *ngFor="let neighborhood of neighborhoods" [value]="neighborhood">{{neighborhood}}</option>
            </select>

            <div *ngIf="isInvalid('neighborhood')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['neighborhood'].errors?.['required']">
                    Neighborhood is required.
                </ng-container>
            </div>

            <input
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('address')?.invalid && 
            (addPropertyForm.get('address')?.touched || addPropertyForm.get('address')?.dirty)}" placeholder="Address"
                formControlName="address" required />

            <div *ngIf="isInvalid('address')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['address'].errors?.['required']">
                    Address is required.
                </ng-container>
            </div>


            <select [formControl]="$any(addPropertyForm).get('yearBuilt')"
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('yearBuilt')?.invalid && 
            (addPropertyForm.get('yearBuilt')?.touched || addPropertyForm.get('yearBuilt')?.dirty)}" required>
                <option *ngFor="let year of years" [ngValue]="year">{{ year }}</option>
            </select>

            <div *ngIf="isInvalid('yearBuilt')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['yearBuilt'].errors?.['required']">
                    Year built is required.
                </ng-container>
            </div>

            <input
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('size')?.invalid && 
        (addPropertyForm.get('size')?.touched || addPropertyForm.get('size')?.dirty)}" placeholder="Size (mÂ²)"
                formControlName="size" type ="number" required />

            <div *ngIf="isInvalid('size')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['size'].errors?.['required']">
                    Size is required.
                </ng-container>
                <ng-container *ngIf="formControl['size'].errors?.['max']">
                    Size can be between 1 and 5000.
                </ng-container>
                <ng-container *ngIf="formControl['size'].errors?.['min']">
                    Size can be between 1 and 5000.
                </ng-container>
            </div>


            <input
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('noOfRooms')?.invalid && 
        (addPropertyForm.get('noOfRooms')?.touched || addPropertyForm.get('noOfRooms')?.dirty)}"
                placeholder="Number of Rooms" type ="number" formControlName="noOfRooms" required />

            <div *ngIf="isInvalid('noOfRooms')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['noOfRooms'].errors?.['required']">
                    Number of rooms is required.
                </ng-container>
                <ng-container *ngIf="formControl['noOfRooms'].errors?.['pattern']">
                    Please enter a number between 1 and 15.
                </ng-container>
            </div>

            <div *ngIf="selectedPropertyType === 1">
                <input
                    class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                    [ngClass]="{'outline-red-500': addPropertyForm.get('floorNo')?.invalid && 
        (addPropertyForm.get('floorNo')?.touched || addPropertyForm.get('floorNo')?.dirty)}" placeholder="floor number"
                    formControlName="floorNo" type ="number"required />
            </div>

            <div *ngIf="isInvalid('floorNo')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['floorNo'].errors?.['required']">
                    Floor number is required.
                </ng-container>
                <ng-container *ngIf="formControl['floorNo'].errors?.['pattern']">
                    Please enter a number between 1 and 25.
                </ng-container>
            </div>

            <div *ngIf="selectedPropertyType === 2">
                <input
                    class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                    [ngClass]="{'outline-red-500': addPropertyForm.get('noOfFloors')?.invalid && 
        (addPropertyForm.get('noOfFloors')?.touched || addPropertyForm.get('noOfFloors')?.dirty)}"
                    placeholder="Number of floors" type ="number" formControlName="noOfFloors" required />
            </div>

            <div *ngIf="isInvalid('noOfFloors')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['noOfFloors'].errors?.['required']">
                    Number of floors is required.
                </ng-container>
                <ng-container *ngIf="formControl['noOfFloors'].errors?.['pattern']">
                    Please enter a number between 1 and 5.
                </ng-container>
            </div>


            <input
                class="block w-full outline outline-gray-300 hover:outline-gray-500 focus:outline-gray-500 rounded-full mb-3 p-2"
                [ngClass]="{'outline-red-500': addPropertyForm.get('price')?.invalid && 
            (addPropertyForm.get('price')?.touched || addPropertyForm.get('price')?.dirty)}" placeholder="Price"
                formControlName="price" type ="number" required />

            <div *ngIf="isInvalid('price')" class="text-red-500 text-sm mb-3 px-3">
                <ng-container *ngIf="formControl['price'].errors?.['required']">
                    Price is required.
                </ng-container>
                <ng-container *ngIf="formControl['price'].errors?.['max']">
                    Size can be between 1 and 30000000.
                </ng-container>
                <ng-container *ngIf="formControl['price'].errors?.['min']">
                    Size can be between 1 and 30000000.
                </ng-container>
            </div>

            <button type="submit" 
                class="block w-full shadow-md text-white font-bold py-2 px-4 border rounded-full mb-3 bg-blue-400 border-blue-600 hover:bg-blue-600">
                Publish
            </button>

            <div *ngIf="showInvalidFormMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded my-3">
                Please fill in all required fields correctly before publishing.
              </div>
        
        </form>
    </div>
</div>